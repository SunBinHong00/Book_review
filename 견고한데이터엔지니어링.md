# 1장 데이터 엔지니어링 상세

## 1.1 데이터 엔지니어링이란?

- **데이터 엔지니어링**:
  - 다른 전문가가 데이터를 사용할 수 있도록 만드는 일련의 작업.
  - 대규모 데이터 수집 및 저장.
  - 추가 분석을 수행할 수 있는 데이터를 준비하기 위한 시스템 설계 및 구축.

### SQL 중심

- 데이터 작업 및 기본 저장소는 RDS.
- 때때로 이러한 처리는 ETL 도구를 사용해 수행.

### 빅데이터 중심

- 데이터 작업 및 기본 스토리지:
  - 하둡, 카산드라, 스파크, 플링크.
- SQL이 사용되는 동안 기본 처리는 프로그래밍 언어로 이루어진다.

### 1.1.1 데이터 엔지니어링 정의

- **데이터 엔지니어링**:
  - Raw data를 가져와 분석 및 머신러닝 등 다운스트림 사용 사례를 지원.
  - 고품질의 일관된 정보를 생성하는 시스템과 프로세스 개발, 구현 및 유지 관리.
  - 보안, 데이터 관리, 데이터 운영, 데이터 아키텍처, 오케스트레이션, 소프트웨어 엔지니어링.

### 1.1.2 데이터 엔지니어링 수명 주기

- **데이터 엔지니어링 수명 주기**:
  - 생성
  - 저장
  - 수집
  - 변환
  - 서빙

### 1.1.4 데이터 엔지니어링과 데이터 과학

- **학습/최적화**: AI, 딥러닝
- **집계/라벨링**: A/B 테스트, 실험, 단순 ML 알고리즘
- **탐색/변환**: 정제, 이상 감지, 준비
- **이동/저장**: 데이터 흐름, 인프라, 파이프라인, ETL, 정형/비정형 데이터 저장
- **수집**: 계측, 로깅, 센서, 외부 데이터, 사용자 생성 콘텐츠

**원천 시스템으로부터의 데이터 > 데이터 엔지니어링 > 데이터 과학과 분석**

## 1.2 데이터 엔지니어링 기술과 활동

- **데이터 엔지니어의 기술역량**:
  - 보안
  - 데이터 관리
  - 데이터옵스
  - 데이터 아키텍처 및 소프트웨어 엔지니어링
  - 최적화:
    - 비용
    - 민첩성
    - 확장성
    - 단순성
    - 재사용성
    - 상호 운용성

### 1.2.1 데이터 성숙도와 데이터 엔지니어

- **데이터 성숙도**:
  - 데이터 활용률, 기능, 통합
  - 데이터 관리 성숙도(DMM)

- **단순화된 기업용 데이터 성숙도 모델**:
  1. 데이터로 시작하기
  2. 데이터로 확장하기
  3. 데이터로 선도하기

#### 1단계: 데이터로 시작하기

- 이 단계에서 데이터 엔지니어는 보통 제너럴리스트.
- 데이터 엔지니어의 목표는 빠르게 움직이고, 견인력을 얻고, 부가가치를 창출.
- 데이터로부터 가치를 창출하는 일에 수요가 존재.
- 이 단계에서 ML에 먼저 뛰어들고 싶지만 권장하지 않음.

- **데이터 조직의 중점 사항**:
  - 경영진을 포함한 주요 관계자의 지원 확보.
  - 적절한 데이터 아키텍처 정의 및 구축.
  - 주요 이니셔티브를 지원하면서 데이터 검수.
  - 데이터 기반을 구축하여 보고서 및 모델 생성.

- **팁**:
  - 데이터로 가시적인 성공을 만들어 조직 의지를 유지.
  - 외부와 소통하며 관계자 피드백 수렴.
  - 과중한 업무 방지 및 불필요한 기술 복잡성 회피.
  - 경쟁 우위를 제공할 때만 맞춤형 솔루션 구축.

#### 2단계: 데이터로 확장하기

이번 과제는 확장성 있는 데이터 아키텍처를 구축하고, 기업이 진정으로 데이터 중심인 미래를 계획하는 것.

- **데이터 성숙도 2단계**:
  - 공식적인 데이터 관행 수립.
  - 확장성 있고 견고한 데이터 아키텍처 구축.
  - DevOps 및 DataOps 관행 채택.
  - ML을 지원하는 시스템 구축.
  - 차별화되지 않은 과중한 업무를 피하고 경쟁 우위를 확보할 때만 커스터마이징.

- **주의깊게 살펴볼 문제**:
  - 최신 기술을 무조건 추구하지 말고 고객 가치에 집중.
  - 클러스터 노드 스토리지보다 데이터 엔지니어링 팀이 병목 현상.
  - 실용적인 리더십으로 데이터 활용법을 교육.

#### 3단계: 데이터로 선도하기

- **데이터 성숙도 3단계**:
  - **자동 배포**: 자동으로 새로운 데이터를 구축 및 배포.
  - **사용자 정의 도구와 시스템 구축**: 경쟁력을 위한 커스텀 도구 개발.
  - **데이터 관리 및 기업적 측면**: 기업 측면에 집중.
  - **데이터 노출 및 전파**:
    - 데이터 카탈로그, 데이터 계보 도구, 메타데이터 관리 시스템을 통해 노출 및 전파.
  - **효율적인 협업**: 엔지니어, 머신러닝 전문가와 협업.
  - **협업 커뮤니티 구축**:
    - 역할이나 직책에 상관없이 커뮤니티 형성.

- **주의깊게 살펴볼 문제**:

  1. **현재 상태 안주**:
     - 2단계에서 현재 상태에 안주하는 것은 큰 위험.
     - 조직이 3단계에 도달하면 유지보수와 개선에 집중.

  2. **기술의 산만함**:
     - 2단계에서 기술의 산만함은 위험 요소.
     - 비즈니스 가치를 제공하지 않는 취미 프로젝트는 피함.
     - 경쟁 우위를 제공할 때만 직접 기술을 활용.

### 1.2.2 데이터 엔지니어의 배경과 기술

- **데이터 엔지니어가 되는 방법**에는 많은 의문점이 있지만 공식화된 경로는 없습니다. 그럼에도 데이터 엔지니어가 성공하기 위해 필수적인 지식은 있습니다.  
- 데이터 엔지니어는 데이터와 기술 모두에 능통해야 합니다:
  - **데이터 측면**: 데이터 관리에 대한 모범 사례 이해.
  - **기술 측면**: 다양한 도구, 옵션, 상호작용, 상충 관계 이해.  
  - **기타 측면**: 소프트웨어 엔지니어링, 데이터 옵스, 데이터 아키텍처에 대한 이해.

- **요약**:
  - 데이터 엔지니어는 데이터 소비자들의 요구사항과 조직의 데이터 전체를 잘 이해해야 합니다.
  - 데이터 엔지니어링은 실용적인 업무이며, 최고의 데이터 엔지니어는 비즈니스와 기술 관점에서 그들의 책임을 판단합니다.

### 1.2.3 비즈니스 책임

- **커뮤니케이션**:
  - 비기술자 및 기술자와의 소통 방법 파악.
  - 조직 전체의 관계 형성과 신뢰 구축이 중요하며, 이는 성공의 핵심입니다.

- **비즈니스 및 제품 요건 이해**:
  - 이러한 요건이 기술로만 해결된다는 믿음은 위험할 정도로 잘못된 생각입니다.
  - 애자일, 데브옵스, 데이터옵스는 조직 전체에 걸친 동의가 필요한 문화적 요소입니다.

- **비용 관리**:
  - 가치 제공과 동시에 비용 절감에 성공하면 훌륭한 성과입니다.
  - 가치, 시간, 총 소유 비용, 기회 비용에 맞게 최적화해야 합니다.
  - 예상치 못한 상황을 방지하기 위해 비용 모니터링 방법을 배우세요.

- **지속적 학습**:
  - 데이터 분야는 빠르게 변화하고 있습니다.
  - 토대가 되는 기본 지식과 새로운 것을 습득하는 능력을 함께 키워야 합니다.
  - 데이터 흐름에 뒤처지지 않고 학습하는 방법을 습득하세요.

 성공적인 데이터 엔지니어는 항상 전체적인 큰 그림을 이해하고 비즈니스 가치를 극대화하는 방법을 파악하고자 한다 커뮤니케이션은 기술자 비기술자 모두에게 필수 요소다 데이터 팀은 다른 이해관계자와의 커뮤니케이션을 바탕으로 성공한 경우가 많으며 따라서 성공이나 실패의 여부가 기술적인 이슈에 따라 결정되는 경우가 거의 없다 조직을 탐색하고 요건을 파악하고 비용을 관리하고 지속해서 학습하는 방법을 알면 경력을 쌓고자 기술적 능력에만 의존한 데이터 엔지니어와 차별화 할 수 있다.


### 1.2.4 기술 책임

- **아키텍처 최적화**: 성능과 비용을 최적화하는 아키텍처 구축 필요.
- **데이터 엔지니어링 수명 주기 지원**:
  - 데이터 생성, 저장, 수집, 변환, 서빙의 각 단계 지원 필요.
  - 보안, 데이터 관리, 옵스, 아키텍처, 오케스트레이션, 소프트웨어 엔지니어링 중요성 강조.

- **전문 기술 요구**: 상용 제품 수준의 소프트웨어 엔지니어링 기술 갖출 것.
  - 고수준 추상화와 코드 파이프라인 작성에 집중.

#### 데이터 엔지니어의 주요 언어

1. **SQL**:
   - 데이터 레이크의 일반적인 인터페이스.
   - 스파크 SQL, 스노우플레이크, 하이브 등 다양한 도구 활용 필요.
   - 데이터 변환 및 분석 문제 신속 해결 가능.
   - 스파크, 프링크 등 프레임워크 내에서 SQL 활용, 최신 SQL 문법 습득 요구.

2. **Python**:
   - 판다스, 넘파이, 에어플로우 등 주요 데이터 도구 기반.
   - 많은 데이터 엔지니어링 도구가 파이썬 API 제공함.

3. **JVM 언어**:
   - 스파크, 하이브, 드루이드 등에서 사용됨.
   - 파이썬보다 성능이 우수하며 저수준 특성에 접근할 수 있음.

4. **Bash**:
   - 리눅스 CLI용 스크립트 작성 및 명령 수행에 필수.
   - Bash 능숙하면 생산성 및 워크플로우 향상됨.

#### 빠르게 변화하는 분야 대응 방법
- **기본 개념 이해**와 **새로운 패러다임 학습** 병행 필요.
- **지속적인 기술 개발**로 업계 흐름 파악 및 적응 요구.


### 1.2.5 A에서 B로 이어진 데이터 엔지니어링 역할의 연속성

데이터 엔지니어링의 역할은 다양하며 모든 데이터 엔지니어가 같은 유형의 작업을 수행하거나 같은 기술을 보유하지 않음. 데이터 성숙도는 기업 내 데이터 역량을 확장함에 따라 직면할 데이터 문제 유형을 이해하는 데 도움을 제공.

#### A형 데이터 엔지니어
- **추상화(Abstraction)**:
  - 차별화되지 않은 과중한 작업을 피하고, 데이터 아키텍처를 가능한 한 추상적이고 단순하게 유지하여 시간 낭비 방지.
  - 주로 시판되는 기성 제품, 관리형 서비스와 도구들을 사용해 데이터 엔지니어링 주기 관리.
  - 데이터 성숙도 수준에 상관없이 산업 전반에 걸쳐 다양한 회사에서 활동.

#### B형 데이터 엔지니어
- **구축(Build)**:
  - 기업의 핵심 역량과 경쟁 우위를 확장하고 활용할 데이터 도구와 시스템 구축.
  - B형 데이터 엔지니어는 데이터 성숙도에서 2단계 및 3단계에 해당하거나 초기 데이터 사용 사례가 독특하고 중요해서 맞춤형 데이터 도구가 필요한 회사에서 자주 발견됨.

#### A형과 B형 데이터 엔지니어의 연계성
- 같은 회사에서 근무하거나 동일 인물일 수도 있음.
- 일반적으로 A형 데이터 엔지니어가 기반 확립을 위해 먼저 채용되며, B형 데이터 엔지니어 기술은 사내에서 필요에 따라 학습하거나 새로운 인재를 고용하여 해결.

## 1.3 조직 내 데이터 엔지니어

### 1.3.1 내부 vs 외부 대면 데이터 엔지니어

- **서비스 대상 이해**:
  - 데이터 엔지니어는 누구에게 서비스를 제공하는지 이해해야 함
  - 주요 업무는 외부 대면, 내부 대면 또는 둘의 혼합일 수 있음

- **외부 대면 데이터 엔지니어**:
  - **역할**: 소셜 미디어 앱, 사물 인터넷, 전자상거래 플랫폼 등 외부 애플리케이션 사용자와 연결함
  - **업무**: 트랜잭션 및 이벤트 데이터를 수집, 저장, 처리하는 시스템을 설계, 구축, 관리함
  - **시스템 특징**: 애플리케이션과 데이터 파이프라인 간 피드백 루프가 있음

- **외부 대면 데이터 엔지니어링의 문제**:
  - **동시성 부하**: 외부 쿼리는 내부 시스템보다 큰 동시성 부하를 처리해야 함
  - **쿼리 제한**: 사용자 쿼리를 제한해 단일 사용자의 인프라 영향을 최소화해야 함
  - **보안 문제**: 보안은 복잡하고 민감하며 특히 멀티테넌트 데이터의 경우 더욱 그렇다

- **내부 대면 데이터 엔지니어**:
  - **집중 영역**: 비즈니스 및 내부 이해관계자의 요구 사항에 집중함
  - **업무**: BI 대시보드, 보고서, 데이터 과학, 머신러닝 모델용 데이터 파이프라인, 데이터 웨어하우스의 생성 및 유지보수를 담당함

- **혼합 업무**:
  - 외부 및 내부 대면 업무는 혼합될 수 있음
  - 데이터 엔지니어는 쿼리 동시성이나 보안 등 요구 사항이 다른 두 그룹을 관리해야 함

### 1.3.2 데이터 엔지니어와 기타 기술 역할

- **업스트림 데이터 생산자**:
  - **소프트웨어 엔지니어**: 비즈니스를 운영하는 소프트웨어와 시스템을 구축하며, 데이터 엔지니어가 사용하는 내부 데이터의 생성에 큰 책임을 가짐. 주로 애플리케이션 이벤트 및 로그 데이터를 생성하며, 데이터 엔지니어와 협력해 신규 프로젝트 초기에 어플리케이션 데이터를 설계
  - **데이터 아키텍트**: 조직의 데이터 관리를 위한 청사진을 설계하며, 데이터 관리와 거버넌스 정책을 수립하고, 전사적인 데이터 관리 전략을 조율. 클라우드 마이그레이션과 신규 클라우드 설계에 핵심적인 역할을 담당
  - **데브옵스 및 사이트 신뢰성 엔지니어**: 운영 모니터링을 통해 데이터를 생성하며, 업스트림 이해관계자로 분류되지만 데이터 시스템 운영을 조정할 때 데이터 엔지니어와 소통하는 다운스트림 역할도 함

- **다운스트림 데이터 소비자**:
  - **데이터 분석가**: 비즈니스 성과와 동향을 파악하기 위해 데이터 웨어하우스나 데이터 레이크에서 SQL 쿼리를 실행하고 스프레드시트나 다양한 BI 도구를 활용. 비즈니스 사용자, 경영진 및 임원 등의 니즈에 맞춰 데이터를 분석하며, 데이터 엔지니어와 협력해 필요한 데이터 원천 파이프라인을 구축
  - **데이터 과학자**: 예측과 추천을 위한 미래지향적인 모델을 구축하며, 데이터 수집, 정제, 준비에 전체 업무 시간의 70-80%를 소모. 확장 가능한 프레임워크가 없다면 데이터 다운샘플링으로 인한 데이터 품질 저하의 위험이 있음. 데이터 엔지니어는 데이터 과학자의 작업 경로를 최적화하여 작업 결과물을 더 쉽게 만들 수 있도록 지원
  - **머신러닝 엔지니어 및 인공지능 연구원**: 고급 머신러닝 기술을 개발하고 모델을 훈련하며, 확장된 운영 환경에서 머신러닝 프로세스를 실행하는 인프라를 설계 및 유지. 딥러닝 프레임워크에 대한 전문 지식을 갖추고 있으며, 데이터 과학자와 협력해 고급 머신러닝 프로세스를 설계

- **데이터 엔지니어의 허브 역할**:
  - 데이터 생산자와 소비자 사이의 허브 역할을 수행하며, 생산과 소비 간 피드백 루프를 관리. 운영 역할을 담당하는 데브옵스 엔지니어와도 소통하며 데이터 시스템 전반을 관리

#### 업스트림 이해관계자

- **데이터 아키텍트**:
  - 데이터 엔지니어와 유사한 추상화 수준에서 작업하며, 조직 데이터 관리를 위한 청사진을 설계
  - 데이터 아키텍처 및 시스템을 맵핑하여 프로세스 전체를 감독
  - 기술적 및 비기술적 측면을 연결하는 가교 역할을 수행
  - 데이터 관리 및 거버넌스 정책을 수립하고 전사적인 전략을 조율
  - 클라우드 마이그레이션과 신규 클라우드 설계에 핵심적인 역할을 담당

- **소프트웨어 엔지니어**:
  - 비즈니스에 필요한 소프트웨어와 시스템을 구축
  - 내부 데이터의 생성 업무를 책임지고, 애플리케이션 이벤트 및 로그 데이터 제공
  - 데이터 엔지니어와 협력해 신규 프로젝트의 초기 단계부터 애플리케이션 데이터를 설계
  - 애플리케이션 데이터의 양, 빈도, 형식, 보완 및 규정 준수 등 데이터 엔지니어링 수명 주기에 영향을 미치는 모든 요소를 파악

- **데브옵스 엔지니어 및 사이트 신뢰성 엔지니어**:
  - 운영 모니터링을 통해 데이터를 생성하며, 데이터 엔지니어의 업스트림 역할을 수행
  - 때로는 데이터 시스템 운영을 조정하며 데이터 엔지니어와 직접 소통하는 다운스트림 역할도 수행

#### 다운스트림 이해관계자

- **다양한 역할**:
  - 데이터 엔지니어가 다운스트림 역할과 소통하는 방법을 다룸
  - 중앙집중식 데이터 엔지니어링 팀 및 서비스 모델도 소개



- 데이터 과학자

  - **모델 구축**:
    - 미래지향적인 예측 및 추천 모델 구축
    - 데이터 수집, 정제, 준비에 업무 시간의 70~80%를 소비

  - **병목 현상과 품질 저하 문제**:
    - 단일 워크스테이션에서 작업 시 데이터 다운샘플링이 발생하며 모델 품질 저하 가능
    - 로컬에서 개발한 코드는 실제 운용 환경 배포에 어려움이 있음
    - 자동화 부족 시 데이터 워크플로우 방해

  - **제품 단계 데이터 과학의 필요성**:
    - 데이터 전문가의 역할을 강조
    - 데이터 엔지니어가 데이터 과학자의 작업 결과물을 제작할 경로를 설정할 수 있도록 지원해야 함

- 데이터 분석가

  - **업무 및 도구**:
    - 비즈니스 성과와 동향 파악
    - 데이터 웨어하우스나 데이터 레이크에서 SQL 쿼리 실행
    - 계산 및 분석에 스프레드시트, BI 도구 사용
    - 주요 고객은 비즈니스 사용자, 경영진, 임원

  - **협업**:
    - 데이터 엔지니어와 협업해 새로운 데이터 원천용 파이프라인 구축
    - 주제별 전문 지식으로 데이터 품질 개선에 기여

- 머신러닝 엔지니어 및 인공지능 연구원

  - **역할 및 전문성**:
    - 데이터 엔지니어, 데이터 과학자와 겹치는 부분이 많음
    - 고급 머신러닝 기술 개발, 모델 훈련, 인프라 설계 및 유지
    - 파이토치, 텐서플로우 등 딥러닝 프레임워크에 대한 실무 지식 보유

  - **운영 환경**:
    - 모델 훈련과 배포에 필요한 하드웨어, 서비스 및 시스템 이해
    - 머신러닝 시스템 운영 환경에 책임을 질 수 있음

  - **경계의 모호함**:
    - 머신러닝 엔지니어링, 데이터 엔지니어링, 데이터 과학 사이 경계가 모호함
    - 데이터 엔지니어와 긴밀히 협업하여 고급 머신러닝 프로세스를 설계

### 1.3.3 데이터 엔지니어와 비즈니스 리더십
  - 기업은 데이터 활용을 확대하며 데이터 엔지니어는 전략적 계획에 참여하고 IT를 넘어 주요 이니셔티브를 주도함
  - 데이터 아키텍트를 지원하며 비즈니스와 데이터 과학, 분석의 결합체로서 역할 수행

- **데이터 엔지니어와 프로젝트 매니저**
  - **역할**:
    - 데이터 엔지니어는 클라우드 마이그레이션, 차세대 데이터 아키텍처 구축 등 장기 프로젝트에 참여
    - 신규 프로젝트에서 최적의 아키텍처 및 도구 선택, 새로운 데이터 아키텍처 구성
    
  - **프로젝트 매니저와의 협업**:
    - 데이터 엔지니어는 인프라 및 서비스 제공에 능력을 발휘
    - 프로젝트 매니저는 트래픽 총괄, 게이트키퍼 역할, 애자일·스크럼 방식 운영
    - 중요한 성과물에 우선순위 부여

- **데이터 엔지니어와 제품 관리자**
  - **역할**:
    - 제품 관리자는 제품 개발 감독 및 제품 라인 관리
    - 데이터 엔지니어는 제품 관리자와 협력해 데이터 제품 개발
    
  - **균형 조절**:
    - 제품 관리자는 기술팀과 고객, 비즈니스 요구 간 균형을 유지
    - 프로젝트 매니저처럼 데이터 엔지니어와의 협업 중요

- **다른 매니저와의 협업**
  - 데이터 엔지니어는 프로젝트 매니저 및 제품 관리자 외에도 다양한 매니저와 소통
  - 일반적으로 서비스 또는 교차 기능 모델을 따르며 다양한 요청을 처리
  - 특정 관리자, 프로젝트 또는 제품에 할당된 자원으로 작업


## 1.4 결론

1장에서는 데이터 엔지니어링 환경의 개요를 다음과 같이 간략하게 설명했다

- **데이터 엔지니어링의 정의와 역할**:
  - 데이터 엔지니어링이란 무엇인지와 데이터 엔지니어가 하는 일에 대해 설명

- **기업의 데이터 성숙도 유형**:
  - 기업의 데이터 성숙도 유형과 그 차이를 이해

- **A형과 B형 데이터 엔지니어**:
  - 두 유형의 데이터 엔지니어 특성과 역할 비교

- **데이터 엔지니어 협업 대상**:
  - 데이터 엔지니어가 협업하는 업스트림 및 다운스트림 이해관계자, 프로젝트 매니저, 제품 관리자 등 다양한 역할 소개

# 2 데이터 엔지니어링 수명 주기

## 2.1 데이터 엔지니어링 수명 주기란?

데이터 엔지니어링 수명 주기는 다음 5단계로 나눌 수 있다:
- **데이터 생성**
- **데이터 수정**
- **데이터 수집**
- **데이터 변환**
- **데이터 서빙**

데이터 저장은 수명 주기 전체에 걸쳐 일어난다. 데이터의 흐름은 깔끔하고 일정하지 않으며 수명 주기의 여러 단계가 반복, 순서가 어긋나거나 겹치기도 한다. 예상치 못한 방식으로 조합될 수 있다.

이 수명 주기에는 여러 필수 요소가 전반에 걸쳐 존재한다:
- **보안**
- **데이터 관리**
- **데이터 옵스**
- **데이터 아키텍처**
- **오케스트레이션**
- **소프트웨어 엔지니어링**

이러한 요소가 없다면 수명 주기의 어떤 부분도 제대로 작동하지 않는다.

### 2.1.1 데이터 생성

원천 시스템은 데이터 엔지니어링 수명 주기에서 사용되는 데이터의 원본이다. 원천 시스템은 예를 들어 IoT 장치, 어플리케이션, 메시지 대기열, 트랜잭션 데이터베이스 등이 될 수 있다. 데이터 엔지니어는 원천 시스템의 데이터를 사용하지만, 원천 시스템 자체를 소유하거나 제어하지 않는다. 이들은 데이터 생성 방식, 데이터 빈도 및 속도, 생성되는 데이터의 다양성을 잘 이해해야 한다.

데이터 엔지니어는 원천 시스템 소유자와 개방적인 소통 라인을 유지해 변경 사항이 파이프라인과 분석에 영향을 주지 않도록 해야 한다. 데이터 엔지니어가 이해해야 하는 다양한 데이터 원천 시스템이 있기 때문에, 이를 평가할 때 주요 고려 사항은 다음과 같다:

- **데이터 원천의 특성**: 원천이 어플리케이션인가, IoT 장치인가?
- **데이터 유지 방식**: 데이터가 오래 보존되는가, 아니면 일시적이고 빠르게 삭제되는가?
- **데이터 일관성**: 출력 데이터에서 어느 정도 일관성을 기대할 수 있는가? 데이터 품질 검사를 실행할 때 오류 데이터나 이상치가 얼마나 자주 나타나는가?
- **에러 빈도**: 데이터 에러는 얼마나 자주 발생하는가?
- **중복 여부**: 데이터의 중복이 있는가?
- **지연 도착**: 일부 데이터 값이 다른 메시지보다 훨씬 늦게 도착할 수 있는가?
- **데이터 스키마**: 데이터 엔지니어가 완전히 파악하려면 여러 테이블 또는 시스템 간의 조인이 필요한가?
- **스키마 변경**: 스키마가 변경되면 어떻게 대처하고 다음 스트림 이해관계자에게 전달할 것인가?
- **데이터 수집 빈도**: 원천 시스템의 데이터를 얼마나 자주 가져와야 하는가?
- **상태 있는 시스템**: 데이터가 정기적인 스냅샷으로 제공되는가, 아니면 변경 데이터 캡처 이벤트로 제공되는가? 변경 사항은 어떻게 추적되는가?
- **업스트림 의존성**: 원천 시스템에 업스트림 데이터 의존 관계가 있는가? 해당 시스템의 특성은 무엇인가?
- **데이터 품질 검사**: 늦거나 누락된 데이터를 확인하기 위한 데이터 품질 검사가 실시되고 있는가?
---
- **원천 시스템의 한계 이해**:
  - 데이터 엔지니어는 원천 어플리케이션에서 분석 쿼리가 자원 경험 및 성능 문제를 일으킬 수 있는지 이해해야 함. 원천 어플리케이션의 분석 작업이 시스템 성능에 영향을 미칠 수 있으므로, 이를 고려한 데이터 처리 방법이 필요함.

- **원천 데이터의 스키마 처리 방식**:
  - 원천 시스템은 데이터의 스키마를 다양한 방식으로 처리할 수 있음. 주요 방식으로는 스키마리스 방식과 고정 스키마 방식이 있음.
  
  - **스키마리스 방식**:
    - 예: 몽고DB와 같은 도큐먼트 데이터베이스에서 사용. 데이터 기록 시 스키마를 따로 정의하지 않으며, 데이터 자체에 스키마 정보를 포함시킬 수 있음.
  
  - **고정 스키마 방식**:
    - 관계형 데이터베이스 스토리지를 사용하는 경우, 데이터베이스에 적용된 고정된 스키마를 따라야 함. 어플리케이션 쓰기 작업은 이 스키마를 준수해야 함.

- **스키마의 진화**:
  - 스키마는 시간이 지남에 따라 변할 수 있음. 데이터 엔지니어의 주요 작업 중 하나는 원천 시스템의 스키마에서 원시 데이터를 받아 분석에 유용한 형태로 변환하는 것임.
  - 원천 스키마가 진화함에 따라 데이터를 적절히 처리하고 변환하는 작업이 더욱 복잡해질 수 있음.

### 2.1.3 데이터 저장

데이터 저장에 대한 몇 가지 주요 고려 사항은 다음과 같습니다:

1. **클라우드 데이터 아키텍처**:
   - 여러 스토리지 솔루션을 활용함.
   - 순수 스토리지뿐만 아니라 복잡한 데이터 변환을 지원하는 경우가 많음.
   - 데이터 수명 주기의 여러 단계에 참여함 (수집, 변환, 서비스 제공 등).

2. **스토리지 시스템 평가: 주요 엔지니어링 고려 사항**:
   - **쓰기 및 읽기 속도**:
     - 스토리지가 아키텍처가 요구하는 쓰기 및 읽기 속도를 충족하는지 확인.
     - 스토리지가 다운스트림 프로세스의 병목 현상을 초래하지 않는지 확인.

   - **작동 방식 이해**:
     - 스토리지 시스템이 작동 방식을 인지하고 최적으로 활용하는지 확인.
     - 객체 스토리지 시스템에 과도한 접근 및 갱신이 적용되지 않도록 주의.

   - **확장성**:
     - 향후 예상되는 확장을 처리할 수 있는지 평가.
     - 용량 제한을 고려하고 읽기 속도, 쓰기 볼륨 등도 함께 고려.

   - **메타데이터 캡처**:
     - 스키마 진화, 데이터 흐름, 데이터 계보 등에 대한 메타데이터를 캡처.
     - 메타데이터는 검색 기능과 제도적 지식을 향상시켜 미래 프로젝트 및 아키텍처 변경을 간소화.

   - **쿼리 패턴 지원**:
     - 순수 스토리지 솔루션인지, 복잡한 쿼리 패턴을 지원하는지 확인.

   - **스키마 적합성**:
     - 스키마에 유연성이 있는지 확인. 강제된 스키마는 유연성을 저해할 수 있음.

   - **데이터 거버넌스**:
     - 마스터 데이터, 골든 레코드, 데이터 품질, 데이터 계보를 어떻게 추적하는지 확인.

   - **법령 준수**:
     - 특정 지리적 위치에만 데이터를 저장하고 다른 곳에는 저장하지 않을 수 있는가? 데이터 주권과 법령 준수를 위한 전략을 수립.


---
#### 데이터 접근 빈도 이해

데이터 접근 빈도에 따라 데이터의 온도가 결정됩니다:

- **핫 데이터**: 가장 자주 액세스되는 데이터.
- **미온적 데이터**: 가끔씩만 액세스되는 데이터.
- **콜드 데이터**: 거의 액세스되지 않으며, 아카이브 시스템에 저장하기에 적합. 규정 준수 목적으로 보관되거나, 장애 시 복구를 위해 사용될 수 있음.

#### 스토리지 시스템 선택

어떤 유형의 스토리지 솔루션을 선택해야 할까요? 이에 대한 결정은 여러 요소에 따라 달라집니다:

- **사용 사례**: 데이터 수집 및 액세스 방식에 따라 스토리지 요구 사항이 달라짐.
- **데이터 볼륨**: 데이터의 총량에 따라 스토리지 크기와 비용이 영향을 받음.
- **수집 빈도**: 데이터가 얼마나 자주 수집되는지에 따라 스토리지 시스템의 성능 요구 사항이 결정됨.
- **데이터 형식 및 크기**: 구조화된 데이터와 비구조화된 데이터의 차이, 데이터 파일 크기에 따른 스토리지 전략이 필요함.

모든 스토리지 기술은 장단점, 즉 트레이드오프가 있습니다. 수많은 스토리지 기술 중 데이터 아키텍처에 가장 적합한 옵션을 찾을 때는 이런 점을 고려해야 합니다.

### 2.1.4 데이터 수집

데이터 원천과 사용 중인 원천 시스템의 특징 및 데이터 저장 방법을 이해한 후, 데이터를 수집하는 것이 중요합니다. 데이터 엔지니어링 수명 주기의 다음 단계는 원천 시스템에서 데이터를 수집하는 것입니다.

원천 시스템은 직접 관리하기 어렵고, 응답하지 않거나 품질이 낮은 데이터를 제공할 수 있습니다. 또한 여러 이유로 데이터 수집 서비스가 제대로 작동하지 않아 데이터 흐름이 멈추거나 필요한 데이터가 충분히 제공되지 않을 수 있습니다.

#### **수집 단계의 주요 엔지니어링 고려 사항:**
- **사용 사례**: 수집 중인 데이터의 사용 사례는 무엇인가? 여러 버전의 데이터셋을 생성하는 대신 재사용이 가능한가?
- **데이터 목적지**: 수집 후 데이터의 최종 목적지는 어디인가?
- **접근 빈도**: 데이터에 얼마나 자주 접근해야 하는가?
- **데이터 용량**: 데이터는 보통 어떤 용량으로 도착하는가?
- **데이터 형식**: 데이터 형식은 무엇이며, 다운스트림 시스템에서 처리할 수 있는가?
- **유효 상태**: 원천 데이터는 다운스트림에서 바로 사용할 수 있는 유효 상태인가? 사용 기간과 사용 불가능해지는 주요 요인은 무엇인가?
- **데이터 변환**: 데이터가 스트리밍 소스에서 전송되면, 목적지에 도달하기 전에 변환이 필요한가? 스트리밍 자체에서 변환하는 것이 적절한가?


#### **배치 vs 스트리밍**

- **스트리밍**:
  - 우리가 다루는 대부분의 데이터는 본질적으로 스트리밍 방식입니다.
  - 스트리밍 수집을 통해 다른 애플리케이션, 데이터베이스, 분석 시스템 등 다운스트림 시스템에 데이터를 실시간으로 연속해 제공할 수 있습니다.
  - **실시간**이란 데이터가 생성된 지 얼마 지나지 않은 짧은 시간 내에 다운스트림 시스템에서 데이터를 사용할 수 있는 것을 의미합니다.

- **배치**:
  - 배치 데이터는 미리 설정된 시간 간격이나 크기 임계값에 도달하면 수집됩니다.
  - 배치 수집은 한 방향으로만 진행되며, 데이터가 배치로 분할되면 다운스트림 소비자의 지연 시간이 제한됩니다.
  - 배치 처리는 분석 및 머신러닝에 다운스트림을 사용할 때 매우 인기 있는 방법입니다.

#### 배치와 스트림 수집의 주요 고려 사항

1. **실시간 데이터 처리**:
   - 데이터를 실시간으로 수집할 경우, 다운스트림 스토리지 시스템이 데이터 흐름 속도를 처리할 수 있는가?

2. **실시간 데이터 필요성**:
   - 밀리초 단위의 실시간 데이터가 필요한가? 아니면 매분 데이터를 축적하는 마이크로 배치 접근이 더 효과적인가?

3. **스트리밍 수집의 이점**:
   - 스트리밍 수집을 통해 얻을 수 있는 구체적인 이점은 무엇인가?
   - 데이터를 실시간으로 수집함으로써 배치 방식에 비해 개선될 수 있는 부분은 무엇인가?

4. **비용과 유지보수**:
   - 스트리밍 방식이 배치 방식보다 시간, 비용, 유지보수, 다운타임, 기회 비용 측면에서 더 많은 비용을 소모하는가?

5. **안정성과 다중화**:
   - 인프라에 장애가 발생할 때, 스트리밍 파이프라인과 시스템은 안정적이고 다중화되어 있는가?

6. **적합한 도구 선택**:
   - 관리형 서비스를 사용할지, 자체 인프라로 Kafka, Flink, Spark, Pulsar 등의 인스턴스를 구축할지 결정해야 함.
   - 관리 비용과 이점은 무엇인가?

7. **머신러닝 활용**:
   - 머신러닝 모델을 배포할 때 온라인 예측 및 지속적인 훈련으로 얻을 수 있는 이점은 무엇인가?

8. **원천 시스템 영향**:
   - 실 운영 인스턴스에서 데이터를 가져올 경우, 수집 프로세스가 원천 시스템에 미칠 영향은 얼마나 될까?

**결론**:
- 스트리밍 수집 방식은 좋은 아이디어처럼 보일 수 있지만, 추가 비용과 복잡성이 발생할 수 있습니다.
- 배치 및 마이크로 배치 수집 프레임워크는 효율적일 수 있습니다.
- 배치 사용의 트레이드오프를 이해하고 비즈니스 사용 사례를 정확하게 파악한 후에 스트리밍 수집 방식을 채택하는 것이 좋습니다.


~p.89